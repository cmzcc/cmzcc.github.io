<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>TSDB-TDengine | Ciallo～(∠・ω&lt; )⌒☆               ccのblog</title><meta name="author" content="cmz"><meta name="copyright" content="cmz"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="碎碎念：前两天做了顽岩的笔试，美美收到了拒绝信，只能说百亿级别的量化开发还是对acm✌太喜爱了，菜鸡没有活路。 emo了半天，然后最近去刷了两天力扣，感觉自己比前段时间的算法能力有一点提升的，虽然不多就是了，努努力多刷点hard难度吧只能说。 今天mentor提到了时序内存数据库，是没有听说过的东西，就去搜了搜，水一条博客，表示自己还活着。 ————————————————————————————">
<meta property="og:type" content="article">
<meta property="og:title" content="TSDB-TDengine">
<meta property="og:url" content="https://cmzcc.github.io/2025/11/05/TSDB-TDengine/index.html">
<meta property="og:site_name" content="Ciallo～(∠・ω&lt; )⌒☆               ccのblog">
<meta property="og:description" content="碎碎念：前两天做了顽岩的笔试，美美收到了拒绝信，只能说百亿级别的量化开发还是对acm✌太喜爱了，菜鸡没有活路。 emo了半天，然后最近去刷了两天力扣，感觉自己比前段时间的算法能力有一点提升的，虽然不多就是了，努努力多刷点hard难度吧只能说。 今天mentor提到了时序内存数据库，是没有听说过的东西，就去搜了搜，水一条博客，表示自己还活着。 ————————————————————————————">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cmzcc.github.io/img/text-cover3.jpg">
<meta property="article:published_time" content="2025-11-05T08:39:16.000Z">
<meta property="article:modified_time" content="2025-11-05T08:48:11.276Z">
<meta property="article:author" content="cmz">
<meta property="article:tag" content="时序内存数据库">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cmzcc.github.io/img/text-cover3.jpg"><link rel="shortcut icon" href="/img/logo.png"><link rel="canonical" href="https://cmzcc.github.io/2025/11/05/TSDB-TDengine/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        if (name && globalFn[key][name]) return
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"No results found for: ${query}","hits_stats":"${hits} articles found"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'TSDB-TDengine',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-11-05 16:48:11'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load', preloader.endLoading)

  if (false) {
    btf.addGlobalFn('pjaxSend', preloader.initLoading, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', preloader.endLoading, 'preloader_end')
  }
})()</script><div id="web_bg" style="background-image: url(/img/background.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/personal-icon.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">109</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">112</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">8</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/text-cover3.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/logo.png" alt="Logo"><span class="site-name">Ciallo～(∠・ω&lt; )⌒☆               ccのblog</span></a><a class="nav-page-title" href="/"><span class="site-name">TSDB-TDengine</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">TSDB-TDengine</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-11-05T08:39:16.000Z" title="Created 2025-11-05 16:39:16">2025-11-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-11-05T08:48:11.276Z" title="Updated 2025-11-05 16:48:11">2025-11-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%80%9D%E8%80%83/">思考</a></span></div><div class="meta-secondline"></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>碎碎念：前两天做了顽岩的笔试，美美收到了拒绝信，只能说百亿级别的量化开发还是对acm✌太喜爱了，菜鸡没有活路。</p>
<p>emo了半天，然后最近去刷了两天力扣，感觉自己比前段时间的算法能力有一点提升的，虽然不多就是了，努努力多刷点hard难度吧只能说。</p>
<p>今天mentor提到了时序内存数据库，是没有听说过的东西，就去搜了搜，水一条博客，表示自己还活着。</p>
<p>——————————————————————————————————————————————————————</p>
<p>本文将分为以下几个核心部分，层层递进，为您全方位解构 TDengine：</p>
<ul>
<li><p><strong>第一部分：核心设计理念——重塑时序数据处理的基石</strong></p>
<ul>
<li>理念一：“一个采集点一张表” (One Table for One Device)</li>
<li>理念二：“数据驱动与化整为零” (Data-Driven &amp; Divide and Conquer)</li>
<li>理念三：“内置核心功能，一体化解决” (All-in-One Solution)</li>
</ul>
</li>
<li><p><strong>第二部分：核心优势详解——设计理念带来的颠覆性成果</strong></p>
<ul>
<li>优势一：极致的性能（写入、查询、计算）</li>
<li>优势二：惊人的数据压缩率</li>
<li>优势三：极低的运营和学习成本</li>
<li>优势四：强大的分析与计算能力（标准SQL、超级表、流计算）</li>
<li>优势五：原生的分布式与高可用</li>
</ul>
</li>
<li><p><strong>第三部分：技术实现深度解析——优势背后的“为什么”</strong></p>
<ul>
<li>存储引擎的奥秘：列式存储、数据块、时间线连续性</li>
<li>查询引擎的智慧：超级表、标签、查询剪枝与聚合下推</li>
<li>分布式架构的艺术：Vnode、Mnode&#x2F;Dnode 与 Raft 协议</li>
<li>一体化设计的实践：内置缓存、流式计算与数据订阅</li>
</ul>
</li>
<li><p><strong>第四部分：横向对比与总结——TDengine 在时序江湖中的定位</strong></p>
<ul>
<li>与 InfluxDB、Prometheus、TimescaleDB 的核心差异</li>
<li>总结：TDengine 为何是物联网与工业互联网时代而生的数据库</li>
</ul>
</li>
</ul>
<hr>
<h3 id="第一部分：核心设计理念——重塑时序数据处理的基石"><a href="#第一部分：核心设计理念——重塑时序数据处理的基石" class="headerlink" title="第一部分：核心设计理念——重塑时序数据处理的基石"></a><strong>第一部分：核心设计理念——重塑时序数据处理的基石</strong></h3><p>传统的关系型数据库、NoSQL 数据库乃至第一代时序数据库，在设计之初并未完全针对物联网（IoT）海量设备、高并发写入、强时序性的数据特点进行原生优化。TDengine 的创始人敏锐地洞察到这一点，其所有颠覆性优势都源于其与众不同的三大核心设计理念。</p>
<h4 id="理念一：“一个采集点一张表”-One-Table-for-One-Device"><a href="#理念一：“一个采集点一张表”-One-Table-for-One-Device" class="headerlink" title="理念一：“一个采集点一张表” (One Table for One Device)"></a><strong>理念一：“一个采集点一张表” (One Table for One Device)</strong></h4><p>这是 TDengine 最具革命性、也是最核心的设计哲学。它彻底颠覆了传统 TSDB 的数据模型。</p>
<ul>
<li><p><strong>传统模型的问题：</strong><br>以 InfluxDB 为例，其经典模型是“一个指标一个 Measurement (表)”。例如，一个工厂所有温度传感器的数据，都会写入一个名为 <code>temperature</code> 的表中。每个传感器通过 <code>tags</code>（标签）来区分，比如 <code>location=building-A, rack=R1, device_id=d_001</code>。<br>这种模型的弊端显而易见：</p>
<ol>
<li><strong>写入瓶颈</strong>：所有设备的数据都涌向同一张表，这张表会成为巨大的写入热点。数据库内部需要维护一个庞大的、跨所有设备的倒排索引（Inverted Index）来处理标签。随着设备数量增多，索引会急剧膨胀，写入时更新索引的开销变得极其昂贵，导致写入性能随设备数增加而急剧下降。</li>
<li><strong>查询效率低下</strong>：查询单个设备的数据时，即使有索引，也需要先在海量数据中根据标签进行过滤，这是一个“大海捞针”的过程。</li>
<li><strong>数据隔离性差</strong>：所有设备数据混杂在一起，物理上不隔离，难以针对单个设备进行数据管理（如删除、修改元数据等）。</li>
</ol>
</li>
<li><p><strong>TDengine 的解决方案：</strong><br>TDengine 强制要求为每一个数据采集点（例如一个传感器、一辆智能汽车、一个电表）单独创建一张表。</p>
<ul>
<li><strong>物理模型</strong>：<code>d_001</code>、<code>d_002</code>、<code>d_003</code> … <code>d_10000000</code> 这些设备，在 TDengine 中会对应一百万张独立的子表。</li>
<li><strong>元数据</strong>：每个设备的静态属性，如地理位置、设备型号等，不再是数据点的一部分，而是作为这张子表的“标签”（Tags）存储。标签是表的元数据，而不是每行数据的列。</li>
</ul>
</li>
<li><p><strong>这一理念为何如此重要？</strong></p>
<ol>
<li><strong>写入隔离，消除瓶颈</strong>：当设备 <code>d_001</code> 写入数据时，它只操作属于自己的那张表。数据写入是纯粹的追加（Append-Only）操作，无需更新一个全局的、庞大的索引。这使得写入操作之间几乎没有锁竞争，写入性能可以随着硬件资源线性扩展，并且不会因为设备数量的增加而衰减。</li>
<li><strong>数据物理聚集，查询高效</strong>：查询设备 <code>d_001</code> 在过去一小时的数据时，TDengine 只需直接定位到 <code>d_001</code> 这张表对应的数据文件块，进行连续的磁盘（或内存）读取。这是一个“按图索骥”的过程，避免了在海量数据中进行扫描和过滤，查询性能极高。</li>
<li><strong>天然的数据生命周期管理</strong>：可以为每张表设置不同的数据保留策略（TTL），管理非常灵活。</li>
</ol>
</li>
</ul>
<p>这个理念是 TDengine 所有高性能优势的基石。它将一个宏大的、无序的管理问题，分解成了无数个微小的、有序的管理问题。</p>
<h4 id="理念二：“数据驱动与化整为零”-Data-Driven-Divide-and-Conquer"><a href="#理念二：“数据驱动与化整为零”-Data-Driven-Divide-and-Conquer" class="headerlink" title="理念二：“数据驱动与化整为零” (Data-Driven &amp; Divide and Conquer)"></a><strong>理念二：“数据驱动与化整为零” (Data-Driven &amp; Divide and Conquer)</strong></h4><p>这个理念是“一个采集点一张表”的延伸和深化，体现在存储和计算的方方面面。</p>
<ul>
<li><p><strong>数据驱动的存储</strong>：<br>TDengine 认识到时序数据的核心特征是“时间驱动的连续数据流”。因此，它的存储引擎被设计为高度利用这一特性。</p>
<ul>
<li><strong>时间线连续性</strong>：对于单个设备（一张表），其数据是按时间严格递增的。TDengine 会将这个设备的数据在物理存储上尽可能连续存放。这种布局使得基于时间范围的查询变成了简单的文件顺序读，效率远高于随机读。</li>
<li><strong>列式存储</strong>：在每个数据块内部，TDengine 采用列式存储。同一指标（列）的数据类型相同，物理上存放在一起。这为后续的高效压缩和分析计算奠定了基础。例如，一个温度列，所有值都是浮点数且变化平缓，极易被压缩。</li>
</ul>
</li>
<li><p><strong>化整为零的计算</strong>：<br>对于跨设备的聚合查询（例如，查询北京所有温度传感器的平均温度），TDengine 采用“分而治之”的策略。</p>
<ol>
<li><strong>第一阶段（子查询）</strong>：查询请求首先被下推到满足查询条件（如标签 <code>location=&#39;beijing&#39;</code>）的每一张子表上。每个子表独立、并行地计算出自己的结果（例如，<code>d_001</code> 的平均温度）。由于单表数据物理聚集，这个阶段非常快。</li>
<li><strong>第二阶段（聚合）</strong>：将所有子查询的结果汇集起来，进行最终的聚合运算（例如，对所有子表的平均温度再求平均）。</li>
</ol>
</li>
</ul>
<p>这个过程将一个复杂的、跨海量数据的查询，分解成了大量简单、并行的子查询，充分利用了多核 CPU 的处理能力。</p>
<h4 id="理念三：“内置核心功能，一体化解决”-All-in-One-Solution"><a href="#理念三：“内置核心功能，一体化解决”-All-in-One-Solution" class="headerlink" title="理念三：“内置核心功能，一体化解决” (All-in-One Solution)"></a><strong>理念三：“内置核心功能，一体化解决” (All-in-One Solution)</strong></h4><p>TDengine 的设计者认为，一个完整的时序数据处理平台不应仅仅是一个数据库，而应包含数据采集、存储、查询、计算、缓存、告警等一系列功能。让用户为了实现一个完整的应用而去拼凑 Kafka (消息队列) + Redis (缓存) + Spark Streaming (流计算) + InfluxDB (存储) + … 的复杂技术栈，会带来巨大的开发和运维成本。</p>
<ul>
<li><strong>TDengine 的一体化设计</strong>：<ol>
<li><strong>内置缓存</strong>：TDengine 自动缓存每个设备的最新状态数据。查询一个设备的最新值时，直接从内存中高效获取，无需访问磁盘。这替代了外部缓存系统（如 Redis）的常见用法。</li>
<li><strong>内置流式计算</strong>：通过“连续查询”（Continuous Query），TDengine 可以在数据写入的同时，进行实时的流式计算和降采样（Downsampling）。例如，可以创建一个任务，自动将每秒的原始数据聚合成每分钟的平均值、最大值，并存入新表。这在很大程度上替代了 Flink 或 Spark Streaming 的功能。</li>
<li><strong>数据订阅</strong>：提供了数据变更的订阅功能，当新数据写入时，可以实时通知下游应用，这部分替代了消息队列（如 Kafka）的功能。</li>
<li><strong>集群管理</strong>：TDengine 原生支持分布式集群，无需依赖 ZooKeeper 等第三方组件，部署和运维极其简单。</li>
</ol>
</li>
</ul>
<p>这个理念使得 TDengine 不仅仅是一个数据库（Database），更是一个精简、高效的时序数据平台（Platform）。它极大地降低了开发者的入门门槛和企业的总拥有成本（TCO）。</p>
<hr>
<h3 id="第二部分：核心优势详解——设计理念带来的颠覆性成果"><a href="#第二部分：核心优势详解——设计理念带来的颠覆性成果" class="headerlink" title="第二部分：核心优势详解——设计理念带来的颠覆性成果"></a><strong>第二部分：核心优势详解——设计理念带来的颠覆性成果</strong></h3><p>基于上述三大设计理念，TDengine 展现出了在多个维度上的颠覆性优势。</p>
<h4 id="优势一：极致的性能"><a href="#优势一：极致的性能" class="headerlink" title="优势一：极致的性能"></a><strong>优势一：极致的性能</strong></h4><p>TDengine 的性能是其最引以为傲的标签，这体现在写入、查询和计算的方方面面。</p>
<ul>
<li><p><strong>超高写入吞吐</strong>：</p>
<ul>
<li><strong>原因</strong>：“一个采集点一张表”的设计，使得数据写入是无锁的追加操作。每个设备的数据流独立写入，互不干扰。传统 TSDB 的全局索引瓶颈被彻底消除。</li>
<li><strong>表现</strong>：在普通服务器上，TDengine 的单核写入能力即可达到每秒数万甚至数十万点。一个集群可以轻松实现每秒千万甚至上亿数据点的写入，且性能不会随设备数（表数量）的增加而下降。这对于动辄千万级连接数的物联网平台至关重要。</li>
</ul>
</li>
<li><p><strong>闪电般的查询速度</strong>：</p>
<ul>
<li><strong>单点时间线查询</strong>：查询单个设备的历史数据。<ul>
<li><strong>原因</strong>：由于数据按设备物理聚集且按时间排序，查询引擎可以直接定位到数据文件，进行顺序 IO。这几乎是理论上最快的查询方式。</li>
<li><strong>表现</strong>：无论数据量多大（TB 甚至 PB 级别），查询单个设备任意时间范围的数据，通常都能在毫秒级完成。</li>
</ul>
</li>
<li><strong>聚合查询</strong>：跨多个设备的聚合分析。<ul>
<li><strong>原因</strong>：“化整为零”的计算模式，将复杂查询分解为并行子查询。同时，其独特的“超级表”（Super Table）机制，可以高效地根据标签过滤出需要进行计算的子表集合，避免全量扫描。</li>
<li><strong>表现</strong>：对于上亿条记录的聚合查询，TDengine 往往能在亚秒级返回结果，比传统大数据方案（如 Hadoop&#x2F;Spark）快几个数量级。</li>
</ul>
</li>
<li><strong>最新状态查询</strong>：<ul>
<li><strong>原因</strong>：内置的缓存机制，将每个设备的最新数据点和状态保存在内存中。</li>
<li><strong>表现</strong>：获取数百万设备的最新状态，响应时间极低，完美替代了“Redis + 关系库”的组合方案。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="优势二：惊人的数据压缩率"><a href="#优势二：惊人的数据压缩率" class="headerlink" title="优势二：惊人的数据压缩率"></a><strong>优势二：惊人的数据压缩率</strong></h4><p>在时序数据场景，存储成本是巨大的开销。TDengine 通过多种手段实现了极高的压缩比。</p>
<ul>
<li><p><strong>原因</strong>：</p>
<ol>
<li><strong>列式存储</strong>：这是高效压缩的基础。相同类型的数据（如所有温度读数）存放在一起，具有极高的数据冗余度和相似性，非常适合压缩。</li>
<li><strong>智能压缩算法</strong>：TDengine 会根据列的数据类型（整型、浮点型、字符串等）和数据特征，自动选择最优的压缩算法。<ul>
<li>对于时间戳列，采用 Delta-Delta 编码。</li>
<li>对于常规数值列，采用 Simple-8B、Gorilla 等专用压缩算法。</li>
<li>对于字符串或二进制数据，采用 LZ4 等通用压缩算法。</li>
</ul>
</li>
<li><strong>数据模型优势</strong>：由于元数据（标签）只存储一次，而不是像 InfluxDB 那样每行数据都带一份，这本身就节省了大量存储空间。</li>
</ol>
</li>
<li><p><strong>表现</strong>：根据数据特征，TDengine 的压缩比通常可以达到 10:1 到 100:1，远高于通用数据库甚至其他一些 TSDB。这意味着用户的存储成本可以降低一个数量级以上。</p>
</li>
</ul>
<h4 id="优势三：极低的运营和学习成本"><a href="#优势三：极低的运营和学习成本" class="headerlink" title="优势三：极低的运营和学习成本"></a><strong>优势三：极低的运营和学习成本</strong></h4><ul>
<li><p><strong>运维成本低</strong>：</p>
<ul>
<li><strong>一体化架构</strong>：无需部署和维护 Kafka、Redis、Spark、Zookeeper 等庞杂的外部组件，一个 TDengine 集群就能搞定所有事。这大大简化了系统架构，降低了运维团队的负担。</li>
<li><strong>资源占用少</strong>：极致的性能和高压缩率意味着可以用更少的服务器资源处理同样规模的数据，直接节省了硬件和云服务成本。</li>
<li><strong>自动管理</strong>：内置数据分片、负载均衡、故障转移、数据生命周期管理等功能，自动化程度高。</li>
</ul>
</li>
<li><p><strong>学习成本低</strong>：</p>
<ul>
<li><strong>标准 SQL</strong>：TDengine 采用标准 SQL 作为主要查询语言，并扩展了少量时序特有的函数（如 <code>INTERVAL</code>, <code>FILL</code>）。对于有任何数据库背景的开发者来说，几乎是零学习成本。这与 InfluxDB 的 Flux 或 Prometheus 的 PromQL 等专用查询语言形成了鲜明对比，后者学习曲线陡峭，生态工具也相对较少。</li>
<li><strong>简单的概念</strong>：核心概念就是“表”、“超级表”和“标签”，非常直观，易于理解和上手。</li>
</ul>
</li>
</ul>
<h4 id="优势四：强大的分析与计算能力"><a href="#优势四：强大的分析与计算能力" class="headerlink" title="优势四：强大的分析与计算能力"></a><strong>优势四：强大的分析与计算能力</strong></h4><p>TDengine 不仅存得快、查得快，其分析计算能力也同样强大。</p>
<ul>
<li><p>**超级表 (Super Table)**：</p>
<ul>
<li><strong>概念</strong>：超级表是同一类型采集点（例如，同一型号的温度传感器）的集合的抽象。它定义了所有子表的表结构（Schema）和标签结构（Tag Schema）。创建子表时，只需指定其属于哪个超级表并提供具体的标签值即可。</li>
<li><strong>作用</strong>：超级表是进行跨设备聚合查询的入口。所有针对超级表的查询，都会自动应用到其下属的、符合标签过滤条件的子表上。它完美地解决了“一个采集点一张表”模型下如何进行聚合分析的问题。</li>
<li><strong>示例</strong>：<code>CREATE STABLE meters (ts TIMESTAMP, current FLOAT, voltage INT) TAGS (location BINARY(64), group_id INT);</code> 定义了一个电表超级表。查询北京所有电表的平均电流：<code>SELECT AVG(current) FROM meters WHERE location = &#39;beijing&#39;;</code></li>
</ul>
</li>
<li><p><strong>丰富的时序函数</strong>：<br>TDengine 提供了大量针对时序分析的 SQL 函数，如：</p>
<ul>
<li><code>INTERVAL()</code>：按时间窗口进行聚合，是时序分析最核心的操作。</li>
<li><code>FILL()</code>：对聚合结果中的空值进行填充（前值、后值、线性插值、固定值）。</li>
<li><code>LAST_ROW()</code> &#x2F; <code>FIRST()</code>：获取时间窗口内的第一条&#x2F;最后一条记录。</li>
<li><code>TD_UNIX_TIMESTAMP()</code>：时间戳转换函数。</li>
<li>……等等。</li>
</ul>
</li>
<li><p><strong>内置流式计算引擎</strong>：</p>
<ul>
<li><strong>概念</strong>：通过 <code>CREATE CONTINUOUS QUERY</code> 语句，可以创建流计算任务。TDengine 会在后台以设定的频率（或由数据触发）自动执行一个查询，并将结果写入指定的表中。</li>
<li><strong>应用</strong>：<ol>
<li><strong>降采样</strong>：将高频的原始数据聚合成低频的统计数据，用于长期趋势分析，同时节省存储空间。</li>
<li><strong>实时告警</strong>：持续监控指标，当计算结果超过阈值时，可以将告警信息写入告警表，触发后续流程。</li>
<li><strong>数据转换</strong>：对原始数据进行实时清洗、转换和特征提取。</li>
</ol>
</li>
<li><strong>优势</strong>：零代码，纯 SQL 定义流计算任务。性能极高，因为它直接在数据存储层进行计算，避免了数据的跨网络传输和序列化&#x2F;反序列化开销。</li>
</ul>
</li>
</ul>
<h4 id="优势五：原生的分布式与高可用"><a href="#优势五：原生的分布式与高可用" class="headerlink" title="优势五：原生的分布式与高可用"></a><strong>优势五：原生的分布式与高可用</strong></h4><p>TDengine 从第一行代码开始就是为分布式场景设计的。</p>
<ul>
<li><strong>架构</strong>：采用多副本、无中心节点的分布式架构。通过虚拟节点（Vnode）实现数据的自动分片和负载均衡。</li>
<li><strong>高可用</strong>：数据在多个副本之间通过 Raft 协议保证一致性。当某个数据节点宕机时，系统能够自动进行故障转移，对应用透明，保证业务连续性。</li>
<li><strong>水平扩展</strong>：当数据量或请求量增长时，只需向集群中添加新的节点，TDengine 会自动进行数据迁移和 rebalance，实现集群的平滑水平扩展。</li>
</ul>
<hr>
<h3 id="第三部分：技术实现深度解析——优势背后的“为什么”"><a href="#第三部分：技术实现深度解析——优势背后的“为什么”" class="headerlink" title="第三部分：技术实现深度解析——优势背后的“为什么”"></a><strong>第三部分：技术实现深度解析——优势背后的“为什么”</strong></h3><p>理解了 TDengine 的优势，我们再深入其内部，看看这些优势是如何通过具体技术实现的。</p>
<h4 id="存储引擎的奥秘"><a href="#存储引擎的奥秘" class="headerlink" title="存储引擎的奥秘"></a><strong>存储引擎的奥秘</strong></h4><ul>
<li><strong>数据模型映射</strong>：一个超级表对应一个目录，该超级表下的每张子表对应一个文件（或一组文件）。这种简单的映射关系使得元数据管理非常轻量。</li>
<li>**存储单元 <code>File Block</code>**：数据被组织成一个个大小固定的数据块。每个块内采用列式存储。当一个块写满后，会被固化到磁盘，并且不可修改。这种设计简化了文件管理，并有利于缓存和顺序读。</li>
<li><strong>时间线连续性保证</strong>：由于写入是按时间顺序的，TDengine 会尽量将同一张表的数据块连续存放在磁盘上。查询时，通过时间戳索引快速定位到起始数据块，然后顺序读取后续块即可。</li>
<li><strong>WAL 与内存缓冲</strong>：写入操作首先写入预写日志（WAL）以保证数据不丢失，然后写入内存。内存中的数据达到一定阈值或时间间隔后，批量刷写到磁盘。这种批处理机制大大提高了写入效率。</li>
</ul>
<h4 id="查询引擎的智慧"><a href="#查询引擎的智慧" class="headerlink" title="查询引擎的智慧"></a><strong>查询引擎的智慧</strong></h4><ul>
<li><strong>查询解析与分发</strong>：当一个针对超级表的聚合查询到达时：<ol>
<li><strong>元数据过滤</strong>：查询引擎首先利用标签索引，快速筛选出所有符合 <code>WHERE</code> 子句中标签条件的子表列表。例如 <code>location=&#39;beijing&#39;</code>，它会迅速找到所有在北京的电表，而不会去扫描其他城市的电表元数据。</li>
<li><strong>查询分发</strong>：将原始查询分解成针对每个子表的子查询，并分发到对应的数据节点（Dnode）上并行执行。</li>
</ol>
</li>
<li>**查询剪枝 (Pruning)**：<ul>
<li><strong>Vnode 剪枝</strong>：根据查询涉及的子表，可以确定需要访问哪些虚拟节点（Vnode），从而避免向不包含任何相关数据的节点发送查询请求。</li>
<li><strong>时间范围剪枝</strong>：每张表、每个数据块都存有最小和最大时间戳的元信息。查询引擎可以根据查询的时间范围，跳过大量不相关的数据块，极大地减少了需要扫描的数据量。</li>
</ul>
</li>
<li>**聚合下推 (Push-down)**：聚合计算（如 <code>AVG</code>, <code>SUM</code>, <code>MAX</code>）被尽可能地下推到数据节点上，在数据块层面就进行预聚合。这样，节点之间网络传输的就不是海量的原始数据，而是预聚合后的中间结果，极大地减少了网络开销和最终聚合节点的计算压力。</li>
</ul>
<h4 id="分布式架构的艺术"><a href="#分布式架构的艺术" class="headerlink" title="分布式架构的艺术"></a><strong>分布式架构的艺术</strong></h4><ul>
<li>**Vnode (虚拟节点)**：TDengine 将数据分片的单位定义为 Vnode。每张子表通过哈希被分配到一个 Vnode。一个物理节点（Dnode）上可以承载成千上万个 Vnode。这种虚拟化层使得数据迁移和负载均衡变得非常灵活。当增加或删除物理节点时，只需迁移部分 Vnode，而无需对所有数据进行 rehash。</li>
<li>**Mnode (管理节点) 与 Dnode (数据节点)**：<ul>
<li><strong>Mnode</strong>：负责集群的元数据管理（用户信息、数据库、表结构、节点状态等），自身通过 Raft 协议保证高可用。</li>
<li><strong>Dnode</strong>：负责存储数据、执行查询和计算。</li>
</ul>
</li>
<li><strong>Raft 协议的应用</strong>：无论是 Mnode 之间还是 Vnode 的多副本之间，都采用 Raft 协议来保证数据的一致性和高可用。TDengine 对 Raft 进行了优化，以适应时序数据写入的特点。</li>
</ul>
<h4 id="一体化设计的实践"><a href="#一体化设计的实践" class="headerlink" title="一体化设计的实践"></a><strong>一体化设计的实践</strong></h4><ul>
<li><strong>内置缓存实现</strong>：每个 Dnode 内部都有一个高效的缓存模块。当数据写入时，最新的一行数据会被同步更新到这个缓存中。查询 <code>LAST_ROW(*)</code> 时，可以直接从缓存返回，避免了磁盘 IO。</li>
<li><strong>流式计算实现</strong>：TDengine 内部有一个调度器，负责管理所有的连续查询任务。调度器会根据任务定义的 <code>INTERVAL</code> 或 <code>SLIDING</code> 窗口，周期性地触发查询。查询的执行复用了已有的分布式查询引擎，结果直接写入目标表，整个过程在数据库内核中闭环完成，效率极高。</li>
</ul>
<hr>
<h3 id="第四部分：横向对比与总结"><a href="#第四部分：横向对比与总结" class="headerlink" title="第四部分：横向对比与总结"></a><strong>第四部分：横向对比与总结</strong></h3><p>为了更清晰地理解 TDengine 的定位，我们将其与业界主流的 TSDB 进行简要对比。</p>
<ul>
<li><p><strong>TDengine vs. InfluxDB</strong>:</p>
<ul>
<li><strong>数据模型</strong>：TDengine 的“一设备一表” vs. InfluxDB 的“一指标一表+Tags”。这是两者最根本的区别，导致了在海量设备场景下性能的巨大差异。</li>
<li><strong>查询语言</strong>：TDengine 的标准 SQL vs. InfluxDB 的 Flux。SQL 的生态和学习曲线优势巨大。</li>
<li><strong>核心功能</strong>：TDengine 内置流计算和缓存，更为一体化。InfluxDB 3.0 也在向 SQL 和更一体化的方向演进，但其底层模型依然不同。</li>
</ul>
</li>
<li><p><strong>TDengine vs. Prometheus</strong>:</p>
<ul>
<li><strong>定位</strong>：Prometheus 是一个面向云原生监控的“拉（Pull）”模型系统，其设计核心是监控和告警，而非一个通用的、高性能的时序数据库。TDengine 是一个通用的“推（Push）”模型数据库，适用范围更广。</li>
<li><strong>存储</strong>：Prometheus 的本地存储设计相对简单，不适合长期、海量数据的存储和复杂查询。TDengine 则是为 PB 级数据设计的分布式存储系统。</li>
<li><strong>生态</strong>：Prometheus 在云原生监控领域拥有强大的生态（如 Grafana, Alertmanager）。TDengine 也在积极融入这些生态，提供兼容 Prometheus 的接口。</li>
</ul>
</li>
<li><p><strong>TDengine vs. TimescaleDB</strong>:</p>
<ul>
<li><strong>架构</strong>：TimescaleDB 是 PostgreSQL 的一个插件&#x2F;扩展，它巧妙地利用了 PG 的分区等机制来实现时序数据的管理。TDengine 则是从零开始、完全为时序场景设计的原生数据库。</li>
<li><strong>优劣</strong>：TimescaleDB 的优势在于完全兼容 PG 生态，可以方便地进行关联查询（JOIN）。但其性能和压缩率，由于受限于 PG 的通用架构，通常无法达到 TDengine 这样的原生 TSDB 的极致水平。TDengine 则在纯粹的时序场景下性能更优、资源消耗更低。</li>
</ul>
</li>
</ul>
<h3 id="总结：为万物互联时代而生的数据基石"><a href="#总结：为万物互联时代而生的数据基石" class="headerlink" title="总结：为万物互联时代而生的数据基石"></a><strong>总结：为万物互联时代而生的数据基石</strong></h3><p>TDengine 的所有设计和优势，最终都指向一个目标：<strong>以最低的成本、最高的效率，解决物联网、工业互联网、车联网等场景下海量时序数据的处理难题。</strong></p>
<p>它的设计理念，是对传统数据库思维范式的一次勇敢的颠覆。通过<strong>“一个采集点一张表”</strong>这个看似简单却蕴含深刻洞察的核心设计，TDengine 将复杂问题简单化，从根本上解决了困扰时序数据库领域多年的“高基数（High Cardinality）”难题。</p>
<p>随之而来的一系列优势——<strong>极致的性能、超高的压缩率、强大的计算能力和极简的运维</strong>——并非孤立的技术堆砌，而是这一核心设计理念下自然生长出来的、逻辑自洽的必然结果。它用一个高度整合、功能完备的平台，替代了过去需要多个系统拼接才能实现的复杂方案，真正做到了“大道至简”。</p>
<p>可以说，TDengine 不仅仅是对现有 TSDB 的一次改良，更是一次针对未来数据形态的重新思考和架构创新。它为即将到来的万物互联时代，提供了一个坚实、高效、经济的数据处理基石。这，就是 TDengine 的核心价值所在。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="cmz">cmz</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://cmzcc.github.io/2025/11/05/TSDB-TDengine/">https://cmzcc.github.io/2025/11/05/TSDB-TDengine/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%97%B6%E5%BA%8F%E5%86%85%E5%AD%98%E6%95%B0%E6%8D%AE%E5%BA%93/">时序内存数据库</a></div><div class="post-share"><div class="social-share" data-image="/img/text-cover3.jpg" data-sites="wechat,qq,weibo,qzone,facebook"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="prev-post pull-left" href="/2025/11/08/%E3%80%8AC++-Concurrency-in-Action%E3%80%8B%E7%AC%AC%E5%9B%9B%E7%AB%A0/" title="《C++-Concurrency-in-Action》第四章"><img class="cover" src="/img/text-cover3.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous</div><div class="prev_info">《C++-Concurrency-in-Action》第四章</div></div></a><a class="next-post pull-right" href="/2025/10/29/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E4%B8%AD%E7%9A%84%E6%84%8F%E5%A4%96%E5%8F%91%E7%8E%B0/" title="线程池中的意外发现"><img class="cover" src="/img/text-cover1.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next</div><div class="next_info">线程池中的意外发现</div></div></a></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comments</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info is-center"><div class="avatar-img"><img src="/img/personal-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">cmz</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">109</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">112</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/cmzcc"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/cmzcc" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:2721530241@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">努力成为c++高手ing，专精多线程编程和性能优化方向，国内私募量化开发实习生（QD)牛马</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%EF%BC%9A%E6%A0%B8%E5%BF%83%E8%AE%BE%E8%AE%A1%E7%90%86%E5%BF%B5%E2%80%94%E2%80%94%E9%87%8D%E5%A1%91%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E7%9A%84%E5%9F%BA%E7%9F%B3"><span class="toc-number">1.</span> <span class="toc-text">第一部分：核心设计理念——重塑时序数据处理的基石</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%90%86%E5%BF%B5%E4%B8%80%EF%BC%9A%E2%80%9C%E4%B8%80%E4%B8%AA%E9%87%87%E9%9B%86%E7%82%B9%E4%B8%80%E5%BC%A0%E8%A1%A8%E2%80%9D-One-Table-for-One-Device"><span class="toc-number">1.1.</span> <span class="toc-text">理念一：“一个采集点一张表” (One Table for One Device)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%90%86%E5%BF%B5%E4%BA%8C%EF%BC%9A%E2%80%9C%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8%E4%B8%8E%E5%8C%96%E6%95%B4%E4%B8%BA%E9%9B%B6%E2%80%9D-Data-Driven-Divide-and-Conquer"><span class="toc-number">1.2.</span> <span class="toc-text">理念二：“数据驱动与化整为零” (Data-Driven &amp; Divide and Conquer)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%90%86%E5%BF%B5%E4%B8%89%EF%BC%9A%E2%80%9C%E5%86%85%E7%BD%AE%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%EF%BC%8C%E4%B8%80%E4%BD%93%E5%8C%96%E8%A7%A3%E5%86%B3%E2%80%9D-All-in-One-Solution"><span class="toc-number">1.3.</span> <span class="toc-text">理念三：“内置核心功能，一体化解决” (All-in-One Solution)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86%EF%BC%9A%E6%A0%B8%E5%BF%83%E4%BC%98%E5%8A%BF%E8%AF%A6%E8%A7%A3%E2%80%94%E2%80%94%E8%AE%BE%E8%AE%A1%E7%90%86%E5%BF%B5%E5%B8%A6%E6%9D%A5%E7%9A%84%E9%A2%A0%E8%A6%86%E6%80%A7%E6%88%90%E6%9E%9C"><span class="toc-number">2.</span> <span class="toc-text">第二部分：核心优势详解——设计理念带来的颠覆性成果</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%98%E5%8A%BF%E4%B8%80%EF%BC%9A%E6%9E%81%E8%87%B4%E7%9A%84%E6%80%A7%E8%83%BD"><span class="toc-number">2.1.</span> <span class="toc-text">优势一：极致的性能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%98%E5%8A%BF%E4%BA%8C%EF%BC%9A%E6%83%8A%E4%BA%BA%E7%9A%84%E6%95%B0%E6%8D%AE%E5%8E%8B%E7%BC%A9%E7%8E%87"><span class="toc-number">2.2.</span> <span class="toc-text">优势二：惊人的数据压缩率</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%98%E5%8A%BF%E4%B8%89%EF%BC%9A%E6%9E%81%E4%BD%8E%E7%9A%84%E8%BF%90%E8%90%A5%E5%92%8C%E5%AD%A6%E4%B9%A0%E6%88%90%E6%9C%AC"><span class="toc-number">2.3.</span> <span class="toc-text">优势三：极低的运营和学习成本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%98%E5%8A%BF%E5%9B%9B%EF%BC%9A%E5%BC%BA%E5%A4%A7%E7%9A%84%E5%88%86%E6%9E%90%E4%B8%8E%E8%AE%A1%E7%AE%97%E8%83%BD%E5%8A%9B"><span class="toc-number">2.4.</span> <span class="toc-text">优势四：强大的分析与计算能力</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%98%E5%8A%BF%E4%BA%94%EF%BC%9A%E5%8E%9F%E7%94%9F%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%8E%E9%AB%98%E5%8F%AF%E7%94%A8"><span class="toc-number">2.5.</span> <span class="toc-text">优势五：原生的分布式与高可用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86%EF%BC%9A%E6%8A%80%E6%9C%AF%E5%AE%9E%E7%8E%B0%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90%E2%80%94%E2%80%94%E4%BC%98%E5%8A%BF%E8%83%8C%E5%90%8E%E7%9A%84%E2%80%9C%E4%B8%BA%E4%BB%80%E4%B9%88%E2%80%9D"><span class="toc-number">3.</span> <span class="toc-text">第三部分：技术实现深度解析——优势背后的“为什么”</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E7%9A%84%E5%A5%A5%E7%A7%98"><span class="toc-number">3.1.</span> <span class="toc-text">存储引擎的奥秘</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%BC%95%E6%93%8E%E7%9A%84%E6%99%BA%E6%85%A7"><span class="toc-number">3.2.</span> <span class="toc-text">查询引擎的智慧</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84%E7%9A%84%E8%89%BA%E6%9C%AF"><span class="toc-number">3.3.</span> <span class="toc-text">分布式架构的艺术</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E4%BD%93%E5%8C%96%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%AE%9E%E8%B7%B5"><span class="toc-number">3.4.</span> <span class="toc-text">一体化设计的实践</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E9%83%A8%E5%88%86%EF%BC%9A%E6%A8%AA%E5%90%91%E5%AF%B9%E6%AF%94%E4%B8%8E%E6%80%BB%E7%BB%93"><span class="toc-number">4.</span> <span class="toc-text">第四部分：横向对比与总结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%EF%BC%9A%E4%B8%BA%E4%B8%87%E7%89%A9%E4%BA%92%E8%81%94%E6%97%B6%E4%BB%A3%E8%80%8C%E7%94%9F%E7%9A%84%E6%95%B0%E6%8D%AE%E5%9F%BA%E7%9F%B3"><span class="toc-number">5.</span> <span class="toc-text">总结：为万物互联时代而生的数据基石</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/11/09/lambda%E5%86%8D%E6%8E%A2/" title="lambda再探"><img src="/img/text-cover2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="lambda再探"/></a><div class="content"><a class="title" href="/2025/11/09/lambda%E5%86%8D%E6%8E%A2/" title="lambda再探">lambda再探</a><time datetime="2025-11-09T03:43:06.000Z" title="Created 2025-11-09 11:43:06">2025-11-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/11/08/%E3%80%8AC++-Concurrency-in-Action%E3%80%8B%E7%AC%AC%E5%9B%9B%E7%AB%A0/" title="《C++-Concurrency-in-Action》第四章"><img src="/img/text-cover3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="《C++-Concurrency-in-Action》第四章"/></a><div class="content"><a class="title" href="/2025/11/08/%E3%80%8AC++-Concurrency-in-Action%E3%80%8B%E7%AC%AC%E5%9B%9B%E7%AB%A0/" title="《C++-Concurrency-in-Action》第四章">《C++-Concurrency-in-Action》第四章</a><time datetime="2025-11-08T14:04:05.000Z" title="Created 2025-11-08 22:04:05">2025-11-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/11/05/TSDB-TDengine/" title="TSDB-TDengine"><img src="/img/text-cover3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="TSDB-TDengine"/></a><div class="content"><a class="title" href="/2025/11/05/TSDB-TDengine/" title="TSDB-TDengine">TSDB-TDengine</a><time datetime="2025-11-05T08:39:16.000Z" title="Created 2025-11-05 16:39:16">2025-11-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/10/29/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E4%B8%AD%E7%9A%84%E6%84%8F%E5%A4%96%E5%8F%91%E7%8E%B0/" title="线程池中的意外发现"><img src="/img/text-cover1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="线程池中的意外发现"/></a><div class="content"><a class="title" href="/2025/10/29/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E4%B8%AD%E7%9A%84%E6%84%8F%E5%A4%96%E5%8F%91%E7%8E%B0/" title="线程池中的意外发现">线程池中的意外发现</a><time datetime="2025-10-29T13:28:03.000Z" title="Created 2025-10-29 21:28:03">2025-10-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/10/29/%E3%80%8AC++-Concurrency-in-Action%E3%80%8B%E7%AC%AC%E4%B8%89%E7%AB%A0/" title="《C++ Concurrency in Action》第三章"><img src="/img/text-cover3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="《C++ Concurrency in Action》第三章"/></a><div class="content"><a class="title" href="/2025/10/29/%E3%80%8AC++-Concurrency-in-Action%E3%80%8B%E7%AC%AC%E4%B8%89%E7%AB%A0/" title="《C++ Concurrency in Action》第三章">《C++ Concurrency in Action》第三章</a><time datetime="2025-10-29T13:27:33.000Z" title="Created 2025-10-29 21:27:33">2025-10-29</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/foot.jpg);"><div id="footer-wrap"><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://cmzcc.github.io/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll to Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  let initFn = window.walineFn || null

  const initWaline = (Fn) => {
    const waline = Fn(Object.assign({
      el: '#waline-wrap',
      serverURL: 'https://cc-blog-blond.vercel.app/',
      pageview: false,
      dark: 'html[data-theme="dark"]',
      path: window.location.pathname,
      comment: false,
    }, null))

    const destroyWaline = () => {
      waline.destroy()
    }

    btf.addGlobalFn('pjaxSendOnce', destroyWaline, 'destroyWaline')
  }

  const loadWaline = () => {
    if (initFn) initWaline(initFn)
    else {
      btf.getCSS('https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.css')
        .then(() => import('https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.js'))
        .then(({ init }) => {
          initFn = init || Waline.init
          initWaline(initFn)
          window.walineFn = initFn
        })
    }
  }

  if ('Waline' === 'Waline' || !false) {
    if (false) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
    else setTimeout(loadWaline, 0)
  } else {
    window.loadOtherComment = loadWaline
  }
})()</script></div><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>